{"version":3,"sources":["components/PopupWithForm.js","components/ImagePopup.js","components/Header.js","context/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/App.js","serviceWorker.js","index.js","images/Vector.svg"],"names":["PopupWithForm","name","title","close","isOpen","children","onSubmit","btnText","className","method","action","type","onClick","ImagePopup","card","class","src","link","alt","Header","logo","CurrentUserContext","React","createContext","Card","id","likes","handleCardClick","onCardLike","onConfirmDelete","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","some","i","cardLikeButtonClassName","Provider","value","key","length","Main","cards","onEditAvatar","onEditProfile","onAddPlace","avatar","about","map","item","Footer","api","options","this","baseUrl","token","headers","authorization","fetch","then","res","ok","json","Promise","reject","status","catch","err","console","log","func","body","JSON","stringify","cardId","isLike","url","EditProfilePopup","onClose","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","placeholder","tabIndex","minLength","maxLength","required","onChange","target","EditAvatarPopup","onUpdateAvatar","linkRef","useRef","current","ref","AddPlacePopup","nameRef","App","setCurrentUser","setIsConfirmPopupOpen","isAvatarPopupOpen","setIsAvatarPopupOpen","isProfilePopupOpen","setIsProfilePopupOpen","isAddPopupOpen","setIsAddPopupOpen","selectedCard","setSelectedCard","isOpenImage","setIsOpenImage","setCards","closeAllPopups","getUserData","getInitialCards","reverse","changeLikeCardStatus","newCard","newCards","c","deleteCardData","filter","input","saveUserData","saveCardData","changeAvatar","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message","module","exports"],"mappings":"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","file":"static/js/main.2e23d4a7.chunk.js","sourcesContent":["import React from \"react\";\r\nfunction PopupWithForm({ name, title, close, isOpen, children, onSubmit, btnText }) {\r\n  return (\r\n    <section className={isOpen ? \"popup popup_active\" : \"popup \"}>\r\n      <form\r\n        method=\"GET\" action=\"#\"\r\n        name={name}\r\n        className={`popup__form popup__form_${name}`}\r\n        onSubmit={onSubmit}\r\n      >\r\n        <button\r\n          className=\"popup__toggle\"\r\n          type=\"button\"\r\n          onClick={close}\r\n        />\r\n        <h3 className=\"popup__title\">{title}</h3>\r\n        {children}\r\n        <button type=\"submit\" className=\"popup__button\">\r\n          {btnText}\r\n        </button>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\nexport default PopupWithForm;\r\n","import React from \"react\";\r\nfunction ImagePopup({ card, close }) {\r\n\r\n  return (\r\n    <section class={`popup popup_review ${(typeof (card) == 'boolean') ? '' : 'popup_active'}`}>\r\n      <figure class=\"popup__figure\">\r\n        <button\r\n          class=\"popup__toggle  popup__toggle_review\"\r\n          type=\"button\"\r\n          onClick={close}\r\n        />\r\n        <img class=\"popup__image\" src={card.link} alt={card.name} />\r\n        <figcaption class=\"popup__subtitle\">{card.name}</figcaption>\r\n\r\n      </figure>\r\n    </section>\r\n  );\r\n}\r\nexport default ImagePopup;\r\n","import React from \"react\";\r\nimport logo from \"../images/Vector.svg\";\r\nfunction Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <img className=\"header__logo\" src={logo} alt=\"Лого\" />\r\n    </header>\r\n  );\r\n}\r\nexport default Header;\r\n","import React from 'react';\r\nconst CurrentUserContext = React.createContext();\r\nexport default CurrentUserContext;","import React from 'react';\r\nimport CurrentUserContext from '../context/CurrentUserContext.js';\r\n\r\nfunction Card({ card, name, id, link, likes, handleCardClick, onConfirmDelete, onCardLike, onCardDelete }) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    const isOwn = card.owner._id === currentUser._id;\r\n    const cardDeleteButtonClassName = (\r\n        `elements__delete-button ${isOwn ? 'elements__delete-button_visible' : 'elements__delete-button_hidden'}`\r\n    );\r\n\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    const cardLikeButtonClassName = (`elements__button ${isLiked ? 'elements__button_active' : ''}`);\r\n\r\n    function cardClick() {\r\n        handleCardClick(card);\r\n    }\r\n    //Лайк и удаление\r\n    function handleLikeClick() {\r\n        onCardLike(card);\r\n    }\r\n    function handleDeleteClick() {\r\n        onCardDelete(card);\r\n    }\r\n\r\n\r\n    return (\r\n        <CurrentUserContext.Provider value={currentUser}>\r\n            <li className=\"elements__element elements__element_add\" key={id} id={id}>\r\n                <button className={cardDeleteButtonClassName} onClick={handleDeleteClick} type=\"button\" />\r\n                <img\r\n                    className=\"elements__image elements__image_add\"\r\n                    src={link}\r\n                    alt={name}\r\n                    onClick={cardClick}\r\n                />\r\n                <h2 className=\"elements__title elements__title_add\">{name}</h2>\r\n                <button className={cardLikeButtonClassName} type=\"button\" onClick={handleLikeClick} />\r\n                <p className=\"elements__like-counter\">{likes.length}</p>\r\n            </li>\r\n        </CurrentUserContext.Provider>\r\n    );\r\n}\r\nexport default Card;","import React from \"react\";\r\n\r\nimport Card from \"./Card.js\";\r\nimport CurrentUserContext from '../context/CurrentUserContext.js';\r\n\r\nfunction Main({ cards, onCardLike, onCardDelete, onEditAvatar, onEditProfile, onAddPlace, onConfirmDelete, handleCardClick }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n\r\n\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__container\">\r\n          <button\r\n            onClick={onEditAvatar}\r\n            type=\"button\"\r\n            className=\"profile__image-button\"\r\n          />\r\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt={currentUser.name} />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n          <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n          <button\r\n            onClick={onEditProfile}\r\n            className=\"profile__edit-button\"\r\n            type=\"button\"\r\n          />\r\n        </div>\r\n        <button\r\n          onClick={onAddPlace}\r\n          className=\"profile__add-button\"\r\n          type=\"button\"\r\n        />\r\n      </section>\r\n      <section className=\"elements\">\r\n        <ul className=\"elements__list\">\r\n\r\n          {cards.map((item) =>\r\n            <Card card={item} name={item.name} id={item._id} link={item.link} key={item._id} likes={item.likes} onCardLike={onCardLike} onConfirmDelete={onConfirmDelete} handleCardClick={handleCardClick} onCardDelete={onCardDelete} />\r\n\r\n          )}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\nexport default Main;\r\n","import React from \"react\";\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p>&copy;2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\nexport default Footer;\r\n","class Api {\r\n  constructor(options) {\r\n    this.baseUrl = options.baseUrl;\r\n    this.token = options.headers.authorization;\r\n  }\r\n  getInitialCards() {\r\n    return fetch(`${this.baseUrl}/cards`, {\r\n      headers: {\r\n        authorization: this.token,\r\n      },\r\n    }).then((res) => {\r\n      if (res.ok) return res.json();\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  getUserData(func) {\r\n    return fetch(`${this.baseUrl}/users/me`, {\r\n      headers: {\r\n        authorization: this.token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      })\r\n      .then((res) => {\r\n        func(res);\r\n        return res;\r\n      });\r\n  }\r\n\r\n  saveUserData({ name, about }) {\r\n    return fetch(`${this.baseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: about,\r\n      }),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } return Promise.reject(`Ошибка: ${res.status}`);\r\n    }).catch((err) => {\r\n      console.log(err);\r\n    });;\r\n  }\r\n\r\n  saveCardData({ name, link }) {\r\n    return fetch(`${this.baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link,\r\n      }),\r\n    }).then((res) => {\r\n      if (!res.ok) return Promise.reject(`Ошибка: ${res.status}`);\r\n      return res.json();\r\n    });\r\n  }\r\n\r\n  deleteCardData(cardId) {\r\n    return fetch(`${this.baseUrl}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLike) {\r\n    return fetch(`${this.baseUrl}/cards/likes/${cardId}`, {\r\n      method: isLike ? ('PUT') : ('DELETE'),\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n\r\n  //likeCard(user, item, card) {\r\n  //  const myLike = item.likes.find((currentUser, index, array) => {\r\n  //    if (currentUser._id === user._id) array.splice(index, 1);\r\n  //    return currentUser._id === user._id;\r\n  //  });\r\n  //  if (!myLike) item.likes.push(user);\r\n  //  return fetch(`${this.baseUrl}/cards/likes/${item._id}`, {\r\n  //    method: myLike ? \"DELETE\" : \"PUT\",\r\n  //    headers: {\r\n  //      authorization: this.token,\r\n  //      \"Content-Type\": \"application/json\",\r\n  //    },\r\n  //  }).then((res) => {\r\n  //    if (!res.ok) return Promise.reject(`Ошибка: ${res.status}`);\r\n  //    res.json().then((res) => {\r\n  //      card.querySelector(\".elements__like-counter\").textContent =\r\n  //        res.likes.length;\r\n  //      card\r\n  //        .querySelector(\".elements__button\")\r\n  //        .classList.toggle(\"elements__button_active\");\r\n  //    });\r\n  //  });\r\n  //}\r\n\r\n  changeAvatar(url) {\r\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: url,\r\n      }),\r\n    }).then((res) => {\r\n      if (res.ok) { return res.json(); }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n      //return res.json();\r\n    }).catch((err) => {\r\n      console.log(err);\r\n    });;\r\n  }\r\n}\r\n\r\n//Экземпляр класса Api\r\nconst api = new Api({\r\n  baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-13\",\r\n  headers: {\r\n    authorization: \"a34a1e6b-d078-470d-87dd-2211c9e10f70\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\nexport default api;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport CurrentUserContext from '../context/CurrentUserContext.js';\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const [name, setName] = React.useState('');\r\n    const [description, setDescription] = React.useState('');\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n    }, [currentUser]);\r\n\r\n    function handleChangeName(e) {\r\n        setName(e.target.value);\r\n    }\r\n    function handleChangeDescription(e) {\r\n        setDescription(e.target.value);\r\n    }\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateUser({\r\n            name,\r\n            about: description,\r\n        })\r\n\r\n    }\r\n    return (\r\n        <PopupWithForm\r\n            name=\"\"\r\n            title=\"Редактировать профиль\"\r\n            isOpen={isOpen}\r\n            btnText={\"Сохранить\"}\r\n            close={onClose}\r\n            onSubmit={handleSubmit}\r\n        >\r\n            <label className=\"popup__input-wrapper\">\r\n                <input\r\n                    className=\"popup__input popup__input_name \"\r\n                    id=\"name\"\r\n                    placeholder=\"Имя\"\r\n                    name=\"name\"\r\n                    tabIndex=\"1\"\r\n                    minLength=\"2\"\r\n                    maxLength=\"40\"\r\n                    required\r\n                    type=\"text\"\r\n                    onChange={handleChangeName}\r\n\r\n                />\r\n                <span className=\"popup__error\" id=\"name-error\"></span>\r\n            </label>\r\n            <label className=\"popup__input-wrapper\">\r\n                <input\r\n                    className=\"popup__input popup__input_activiti\"\r\n                    id=\"activiti\"\r\n                    placeholder=\"Род занятий\"\r\n                    name=\"about\"\r\n                    tabIndex=\"2\"\r\n                    type=\"text\"\r\n                    minLength=\"2\"\r\n                    maxLength=\"200\"\r\n                    required\r\n                    onChange={handleChangeDescription}\r\n\r\n                />\r\n                <span className=\"popup__error\" id=\"activiti-error\"></span>\r\n            </label>\r\n        </PopupWithForm>\r\n    )\r\n}\r\nexport default EditProfilePopup;","import React from \"react\";\r\n\r\nimport PopupWithForm from './PopupWithForm.js';\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n    //const currentUser = React.useContext(CurrentUserContext);\r\n    const linkRef = React.useRef();\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateAvatar({\r\n            avatar: linkRef.current.value,\r\n\r\n        });\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n            name=\"\"\r\n            title=\"Обновить аватар\"\r\n            isOpen={isOpen}\r\n            btnText={\"Сохранить\"}\r\n            close={onClose}\r\n            onSubmit={handleSubmit}\r\n        >\r\n            <label className=\"popup__input-wrapper\">\r\n                <input\r\n                    className=\"popup__input popup__input_link-avatar\"\r\n                    id=\"link\"\r\n                    placeholder=\"Ссылка на картинку\"\r\n                    name=\"link\"\r\n                    tabIndex=\"2\"\r\n                    type=\"url\"\r\n                    required\r\n                    ref={linkRef}\r\n                />\r\n                <span className=\"popup__error\" id=\"link-error\"></span>\r\n            </label>\r\n        </PopupWithForm>\r\n\r\n    )\r\n}\r\nexport default EditAvatarPopup;","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\r\n    const linkRef = React.useRef();\r\n    const nameRef = React.useRef();\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onAddPlace({\r\n            link: linkRef.current.value,\r\n            name: nameRef.current.value\r\n        });\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n            name=\"\"\r\n            title=\"Новое место\"\r\n            isOpen={isOpen}\r\n            btnText={\"Добавить\"}\r\n            close={onClose}\r\n            onSubmit={handleSubmit}\r\n        >\r\n            <label className=\"popup__input-wrapper\">\r\n                <input\r\n                    className=\"popup__input popup__input_place\"\r\n                    id=\"name-card\"\r\n                    placeholder=\"Название\"\r\n                    name=\"name\"\r\n                    tabIndex=\"1\"\r\n                    type=\"text\"\r\n                    minLength=\"1\"\r\n                    maxLength=\"30\"\r\n                    required\r\n                    ref={nameRef}\r\n                />\r\n                <span className=\"popup__error\" id=\"name-card-error\"></span>\r\n            </label>\r\n            <label className=\"popup__input-wrapper\">\r\n                <input\r\n                    className=\"popup__input popup__input_link\"\r\n                    id=\"link\"\r\n                    placeholder=\"Ссылка на картинку\"\r\n                    name=\"link\"\r\n                    tabIndex=\"2\"\r\n                    type=\"url\"\r\n                    required\r\n                    ref={linkRef}\r\n                />\r\n                <span className=\"popup__error\" id=\"link-error\"></span>\r\n            </label>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\nexport default AddPlacePopup;","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm.js\";\nimport ImagePopup from \"./ImagePopup.js\";\nimport Header from \"./Header.js\";\nimport Main from \"./Main.js\";\nimport Footer from \"./Footer.js\";\nimport api from \"../utils/api.js\";\nimport CurrentUserContext from '../context/CurrentUserContext.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from \"./AddPlacePopup.js\";\n\nfunction App() {\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [isConfirmPopupOpen, setIsConfirmPopupOpen] = React.useState(false);\n  const [isAvatarPopupOpen, setIsAvatarPopupOpen] = React.useState(false);\n  const [isProfilePopupOpen, setIsProfilePopupOpen] = React.useState(false);\n  const [isAddPopupOpen, setIsAddPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(false);\n  const [isOpenImage, setIsOpenImage] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  React.useEffect(() => {\n    api.getUserData((res) => {\n\n      setCurrentUser(res);\n    });\n  }, []);\n\n  function handleCardDeleteClick() {\n    setIsConfirmPopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsAvatarPopupOpen(true);\n  }\n  function handleEditProfileClick() {\n    setIsProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setIsAddPopupOpen(true);\n  }\n  function closeAllPopups() {\n    setIsAvatarPopupOpen(false);\n    setIsProfilePopupOpen(false);\n    setIsAddPopupOpen(false);\n    setSelectedCard(false);\n    setIsOpenImage(false);\n    setIsConfirmPopupOpen(false);\n  }\n  function handleCardClick(card) {\n\n    setSelectedCard(card);\n    setIsOpenImage(true);\n  }\n\n\n\n\n  React.useEffect(() => {\n    api\n      .getInitialCards()\n      .then((res) => {\n\n        setCards(res.reverse());\n      })\n  }, []);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      // Обновляем стейт\n      setCards(newCards);\n    })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCardData(card._id);\n    setCards(cards.filter((item) => { return item._id != card._id }));\n  }\n\n  function handleUpdateUser(input) {\n    api.saveUserData(input).then((res) => {\n      setCurrentUser(res);\n      closeAllPopups();\n    })\n  }\n\n  function handleUpdateAvatar(input) {\n    api.changeAvatar(input.avatar)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      });\n  }\n  function handleAddPlaceSubmit(input) {\n    api.saveCardData(input).then((res) => {\n      setCards([...cards, res]);\n      closeAllPopups();\n    })\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header />\n        <Main\n          cards={cards}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          handleCardClick={handleCardClick}\n          onConfirmDelete={handleCardDeleteClick}\n        />\n\n        <Footer />\n        <EditProfilePopup isOpen={isProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}></EditProfilePopup>\n        <AddPlacePopup isOpen={isAddPopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit}></AddPlacePopup>\n\n        <EditAvatarPopup isOpen={isAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}></EditAvatarPopup>\n        <PopupWithForm\n          name='delete'\n          title=\"Вы уверены?\"\n          btnText={\"Да\"}\n          close={closeAllPopups}>\n        </PopupWithForm>\n\n        {isOpenImage && <ImagePopup close={closeAllPopups} card={selectedCard} />}\n\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/Vector.855a8c98.svg\";"],"sourceRoot":""}